import java.util.Scanner;

public class Sudoku {
    private int[][] tablero;
    private final int VACIO = 0;  // Representa una celda vacía

    // Constructor que inicializa el tablero de Sudoku
    public Sudoku() {
        tablero = new int[9][9];
    }

    // Método para mostrar el tablero en consola
    public void mostrarTablero() {
        for (int i = 0; i < 9; i++) {
            if (i % 3 == 0 && i != 0) {
                System.out.println("------+-------+------");  // Línea separadora entre bloques
            }
            for (int j = 0; j < 9; j++) {
                if (j % 3 == 0 && j != 0) {
                    System.out.print("| ");
                }
                System.out.print(tablero[i][j] == VACIO ? ". " : tablero[i][j] + " ");
            }
            System.out.println();
        }
    }

    // Método para insertar un valor en una celda
    public boolean insertarValor(int fila, int columna, int valor, Scanner scanner) {
        if (valor < 1 || valor > 9 || fila < 0 || fila >= 9 || columna < 0 || columna >= 9) {
            System.out.println("Entrada inválida. Asegúrate de que los valores sean entre 1 y 9 y dentro del rango de la cuadrícula.");
            return false;
        }

        if (tablero[fila][columna] != VACIO) {
            System.out.println("La posición [" + (fila + 1) + ", " + (columna + 1) + "] ya está ocupada con el número " + tablero[fila][columna] + ".");
            System.out.print("¿Deseas reemplazar este valor? (s/n): ");
            String respuesta = scanner.next();
            if (!respuesta.equalsIgnoreCase("s")) {
                return false;
            }
        }

        if (!esValido(fila, columna, valor)) {
            System.out.println("El valor no es válido en esa posición.");
            return false;
        }

        tablero[fila][columna] = valor;
        return true;
    }

    // Método para validar si un valor puede colocarse en una celda según las reglas de Sudoku
    private boolean esValido(int fila, int columna, int valor) {
        // Comprobar si el valor ya está en la fila
        for (int i = 0; i < 9; i++) {
            if (tablero[fila][i] == valor) {
                return false;
            }
        }

        // Comprobar si el valor ya está en la columna
        for (int i = 0; i < 9; i++) {
            if (tablero[i][columna] == valor) {
                return false;
            }
        }

        // Comprobar si el valor ya está en el bloque 3x3
        int bloqueFila = (fila / 3) * 3;
        int bloqueColumna = (columna / 3) * 3;
        for (int i = bloqueFila; i < bloqueFila + 3; i++) {
            for (int j = bloqueColumna; j < bloqueColumna + 3; j++) {
                if (tablero[i][j] == valor) {
                    return false;
                }
            }
        }

        return true;
    }

    // Método para comprobar si el tablero está completo
    public boolean estaCompleto() {
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 9; j++) {
                if (tablero[i][j] == VACIO) {
                    return false;
                }
            }
        }
        return true;
    }

    // Método principal para jugar Sudoku
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        Sudoku sudoku = new Sudoku();

        // Prellenar el tablero (puedes modificarlo para que sea más fácil o más difícil)
        sudoku.tablero[0][0] = 5;
        sudoku.tablero[1][1] = 3;
        sudoku.tablero[2][2] = 7;
        sudoku.tablero[0][4] = 6;
        sudoku.tablero[4][4] = 8;
        sudoku.tablero[8][8] = 9;

        System.out.println("¡Bienvenido al juego de Sudoku!");

        while (!sudoku.estaCompleto()) {
            sudoku.mostrarTablero();
            System.out.println("Introduce el número en la forma: fila columna valor (por ejemplo: 1 2 3)");
            int fila = scanner.nextInt() - 1;  // Para que las filas/columnas empiecen desde 1
            int columna = scanner.nextInt() - 1;
            int valor = scanner.nextInt();

            if (sudoku.insertarValor(fila, columna, valor, scanner)) {
                System.out.println("Valor insertado correctamente.");
            } else {
                System.out.println("No se pudo insertar el valor. Intenta nuevamente.");
            }
        }

        System.out.println("¡Felicidades! Has completado el Sudoku.");
        scanner.close();
    }
}
